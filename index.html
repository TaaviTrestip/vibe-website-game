<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üçå Banana Clicker üçå</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background-color: #1a1a2e;
    font-family: 'Press Start 2P', monospace;
    color: #fff;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    image-rendering: pixelated;
    overflow: hidden;
  }

  .game-container {
    display: flex;
    gap: 24px;
    padding: 24px;
    max-width: 1100px;
    width: 100%;
    align-items: flex-start;
  }

  /* -------- LEFT: Stats Panel -------- */
  .stats-panel {
    background: #16213e;
    border: 4px solid #e9b44c;
    padding: 20px;
    width: 260px;
    flex-shrink: 0;
    image-rendering: pixelated;
    box-shadow: 6px 6px 0 #0f0f23;
  }

  .stats-panel h2 {
    font-size: 11px;
    color: #e9b44c;
    margin-bottom: 14px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 2px;
  }

  .stat-row {
    display: flex;
    justify-content: space-between;
    font-size: 9px;
    margin-bottom: 10px;
    color: #c0c0c0;
  }

  .stat-row span:last-child {
    color: #f5d442;
  }

  /* -------- CENTER: Clicker -------- */
  .clicker-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
  }

  .title {
    font-size: 20px;
    color: #f5d442;
    text-shadow: 3px 3px 0 #b8860b;
    text-align: center;
  }

  .banana-count {
    font-size: 14px;
    color: #ffe066;
    text-shadow: 2px 2px 0 #b8860b;
  }

  .per-second {
    font-size: 9px;
    color: #a0a0a0;
  }

  .banana-btn {
    width: 180px;
    height: 180px;
    background: none;
    border: none;
    cursor: pointer;
    transition: transform 0.08s;
    position: relative;
    outline: none;
  }

  .banana-btn:active {
    transform: scale(0.88);
  }

  .banana-btn canvas {
    width: 100%;
    height: 100%;
    image-rendering: pixelated;
  }

  .float-text {
    position: absolute;
    font-family: 'Press Start 2P', monospace;
    font-size: 12px;
    color: #ffe066;
    pointer-events: none;
    animation: floatUp 0.9s ease-out forwards;
    text-shadow: 1px 1px 0 #b8860b;
    z-index: 10;
  }

  @keyframes floatUp {
    0%   { opacity: 1; transform: translateY(0); }
    100% { opacity: 0; transform: translateY(-80px); }
  }

  .save-btn-row {
    display: flex;
    gap: 10px;
    margin-top: 8px;
  }

  .pixel-btn {
    font-family: 'Press Start 2P', monospace;
    font-size: 8px;
    padding: 8px 14px;
    border: 3px solid #e9b44c;
    background: #16213e;
    color: #e9b44c;
    cursor: pointer;
    box-shadow: 3px 3px 0 #0f0f23;
    transition: background 0.15s;
  }

  .pixel-btn:hover { background: #1a2744; }
  .pixel-btn:active { box-shadow: 1px 1px 0 #0f0f23; transform: translate(2px,2px); }

  .save-msg {
    font-size: 8px;
    color: #5cdb5c;
    min-height: 14px;
  }

  /* -------- RIGHT: Upgrades -------- */
  .upgrades-panel {
    background: #16213e;
    border: 4px solid #e9b44c;
    padding: 16px;
    width: 320px;
    flex-shrink: 0;
    box-shadow: 6px 6px 0 #0f0f23;
    max-height: 520px;
    overflow-y: auto;
  }

  .upgrades-panel h2 {
    font-size: 11px;
    color: #e9b44c;
    margin-bottom: 14px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 2px;
  }

  .upgrade-card {
    background: #0f3460;
    border: 3px solid #333;
    padding: 10px 12px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: border-color 0.15s, background 0.15s;
    position: relative;
  }

  .upgrade-card:hover { border-color: #e9b44c; background: #14406e; }

  .upgrade-card.locked {
    opacity: 0.45;
    cursor: not-allowed;
  }

  .upgrade-card .upgrade-icon {
    font-size: 18px;
    margin-right: 6px;
    vertical-align: middle;
  }

  .upgrade-card .upgrade-name {
    font-size: 9px;
    color: #ffe066;
  }

  .upgrade-card .upgrade-desc {
    font-size: 7px;
    color: #a0b8d0;
    margin-top: 6px;
    line-height: 1.6;
  }

  .upgrade-card .upgrade-cost {
    font-size: 8px;
    color: #5cdb5c;
    margin-top: 6px;
  }

  .upgrade-card .upgrade-owned {
    position: absolute;
    top: 8px;
    right: 10px;
    font-size: 8px;
    color: #c0c0c0;
  }

  /* Scrollbar */
  .upgrades-panel::-webkit-scrollbar { width: 8px; }
  .upgrades-panel::-webkit-scrollbar-track { background: #0f0f23; }
  .upgrades-panel::-webkit-scrollbar-thumb { background: #e9b44c; }

  /* Responsive */
  @media (max-width: 900px) {
    .game-container { flex-direction: column; align-items: center; }
    .stats-panel, .upgrades-panel { width: 100%; max-width: 400px; }
  }
</style>
</head>
<body>

<div class="game-container">
  <!-- STATS -->
  <div class="stats-panel">
    <h2>üìä Stats</h2>
    <div class="stat-row"><span>Total Clicks</span><span id="statClicks">0</span></div>
    <div class="stat-row"><span>Total Bananas</span><span id="statTotal">0</span></div>
    <div class="stat-row"><span>Per Click</span><span id="statPerClick">1</span></div>
    <div class="stat-row"><span>Per Second</span><span id="statBps">0</span></div>
    <div class="stat-row"><span>Upgrades Bought</span><span id="statUpgrades">0</span></div>
  </div>

  <!-- CLICKER -->
  <div class="clicker-panel">
    <div class="title">üçå Banana Clicker üçå</div>
    <div class="banana-count"><span id="bananaCount">0</span> bananas</div>
    <div class="per-second" id="bpsDisplay">0 per second</div>

    <button class="banana-btn" id="bananaBtn" aria-label="Click the banana">
      <canvas id="bananaCanvas" width="64" height="64"></canvas>
    </button>

    <div class="save-btn-row">
      <button class="pixel-btn" id="saveBtn">üíæ Save</button>
      <button class="pixel-btn" id="resetBtn">üóëÔ∏è Reset</button>
    </div>
    <div class="save-msg" id="saveMsg"></div>
  </div>

  <!-- UPGRADES -->
  <div class="upgrades-panel">
    <h2>‚¨ÜÔ∏è Upgrades</h2>
    <div id="upgradeList"></div>
  </div>
</div>

<script>
// ===================== GAME STATE =====================
const defaultState = () => ({
  bananas: 0,
  totalBananas: 0,
  totalClicks: 0,
  perClick: 1,
  bps: 0,
  upgrades: {}
});

let state = defaultState();

// ===================== UPGRADES DATA =====================
const upgrades = [
  { id: 'cursor',       name: 'Auto Cursor',       icon: 'üëÜ', desc: '+1 banana/sec',             baseCost: 15,    type: 'bps',   value: 1,   growth: 1.15 },
  { id: 'monkey',       name: 'Monkey Helper',      icon: 'üêí', desc: '+5 bananas/sec',            baseCost: 100,   type: 'bps',   value: 5,   growth: 1.15 },
  { id: 'bigClick',     name: 'Bigger Hands',       icon: 'ü§≤', desc: '+1 banana/click',           baseCost: 50,    type: 'click', value: 1,   growth: 1.20 },
  { id: 'farm',         name: 'Banana Farm',        icon: 'üå±', desc: '+20 bananas/sec',           baseCost: 500,   type: 'bps',   value: 20,  growth: 1.15 },
  { id: 'doubleClick',  name: 'Power Click',        icon: 'üí™', desc: '+5 bananas/click',          baseCost: 300,   type: 'click', value: 5,   growth: 1.20 },
  { id: 'factory',      name: 'Banana Factory',     icon: 'üè≠', desc: '+80 bananas/sec',           baseCost: 2000,  type: 'bps',   value: 80,  growth: 1.15 },
  { id: 'megaClick',    name: 'Mega Hands',         icon: 'ü¶æ', desc: '+25 bananas/click',         baseCost: 1500,  type: 'click', value: 25,  growth: 1.20 },
  { id: 'plantation',   name: 'Plantation',         icon: 'üå¥', desc: '+250 bananas/sec',          baseCost: 8000,  type: 'bps',   value: 250, growth: 1.15 },
  { id: 'hyperClick',   name: 'Hyper Click',        icon: '‚ö°', desc: '+100 bananas/click',        baseCost: 5000,  type: 'click', value: 100, growth: 1.20 },
  { id: 'empire',       name: 'Banana Empire',      icon: 'üëë', desc: '+1000 bananas/sec',         baseCost: 50000, type: 'bps',   value: 1000,growth: 1.15 },
];

function getUpgradeCount(id) { return state.upgrades[id] || 0; }

function getUpgradeCost(u) {
  return Math.floor(u.baseCost * Math.pow(u.growth, getUpgradeCount(u.id)));
}

// ===================== PIXEL BANANA DRAWING =====================
function drawBanana(ctx) {
  const b = [
    '..........######..................',
    '........##YYYY##..................',
    '......##YYYYYY##..................',
    '.....#YYYYYYYY##..................',
    '....#YYYYYYYYY#...................',
    '...#YYYYYYYYY##...................',
    '...#YYYYYYYY##....................',
    '..#YYYYYYYY##.....................',
    '..#YYYYYYY##......................',
    '..#YYYYYYY#.......................',
    '..#YYYYYY##......................',
    '..#YYYYYY#.......................',
    '..#YYYYY##.......................',
    '...#YYYY##.......................',
    '...#YYYY#........................',
    '....#YYY#........................',
    '....##YY##.......................',
    '.....##YY##......................',
    '......##YY##.....................',
    '.......##YY##....................',
    '........##YY##...................',
    '.........##YY##..................',
    '..........##Y##..................',
    '...........####..................',
    '............##...................',
  ];

  const colors = { '#': '#8B6914', 'Y': '#FFE135', '.': null };
  const px = 2;

  b.forEach((row, y) => {
    for (let x = 0; x < row.length; x++) {
      const c = colors[row[x]];
      if (c) {
        ctx.fillStyle = c;
        ctx.fillRect(x * px + 2, y * px + 4, px, px);
      }
    }
  });
}

const bananaCanvas = document.getElementById('bananaCanvas');
const bCtx = bananaCanvas.getContext('2d');
drawBanana(bCtx);

// ===================== RENDER =====================
function formatNum(n) {
  if (n >= 1e12) return (n / 1e12).toFixed(1) + 'T';
  if (n >= 1e9)  return (n / 1e9).toFixed(1) + 'B';
  if (n >= 1e6)  return (n / 1e6).toFixed(1) + 'M';
  if (n >= 1e3)  return (n / 1e3).toFixed(1) + 'K';
  return Math.floor(n).toString();
}

function recalcStats() {
  let bps = 0, pc = 1;
  upgrades.forEach(u => {
    const count = getUpgradeCount(u.id);
    if (u.type === 'bps')   bps += u.value * count;
    if (u.type === 'click') pc  += u.value * count;
  });
  state.bps = bps;
  state.perClick = pc;
}

function renderStats() {
  document.getElementById('bananaCount').textContent = formatNum(state.bananas);
  document.getElementById('bpsDisplay').textContent  = formatNum(state.bps) + ' per second';
  document.getElementById('statClicks').textContent   = formatNum(state.totalClicks);
  document.getElementById('statTotal').textContent    = formatNum(state.totalBananas);
  document.getElementById('statPerClick').textContent = formatNum(state.perClick);
  document.getElementById('statBps').textContent      = formatNum(state.bps);

  let totalUp = 0;
  Object.values(state.upgrades).forEach(v => totalUp += v);
  document.getElementById('statUpgrades').textContent = totalUp;
}

function renderUpgrades() {
  const list = document.getElementById('upgradeList');
  list.innerHTML = '';
  upgrades.forEach(u => {
    const cost = getUpgradeCost(u);
    const owned = getUpgradeCount(u.id);
    const canAfford = state.bananas >= cost;

    const card = document.createElement('div');
    card.className = 'upgrade-card' + (canAfford ? '' : ' locked');
    card.innerHTML = `
      <span class="upgrade-icon">${u.icon}</span>
      <span class="upgrade-name">${u.name}</span>
      <span class="upgrade-owned">x${owned}</span>
      <div class="upgrade-desc">${u.desc}</div>
      <div class="upgrade-cost">üçå ${formatNum(cost)}</div>
    `;
    card.addEventListener('click', () => buyUpgrade(u));
    list.appendChild(card);
  });
}

// ===================== ACTIONS =====================
function clickBanana(e) {
  state.bananas += state.perClick;
  state.totalBananas += state.perClick;
  state.totalClicks++;

  // Float text
  const btn = document.getElementById('bananaBtn');
  const rect = btn.getBoundingClientRect();
  const ft = document.createElement('div');
  ft.className = 'float-text';
  ft.textContent = '+' + formatNum(state.perClick);
  ft.style.left = (e.clientX - rect.left - 10) + 'px';
  ft.style.top  = (e.clientY - rect.top - 10) + 'px';
  btn.appendChild(ft);
  setTimeout(() => ft.remove(), 900);

  renderStats();
  renderUpgrades();
}

function buyUpgrade(u) {
  const cost = getUpgradeCost(u);
  if (state.bananas < cost) return;
  state.bananas -= cost;
  state.upgrades[u.id] = (state.upgrades[u.id] || 0) + 1;
  recalcStats();
  renderStats();
  renderUpgrades();
}

// ===================== GAME LOOP (BPS) =====================
let lastTick = performance.now();

function gameTick() {
  const now = performance.now();
  const dt = (now - lastTick) / 1000;
  lastTick = now;

  if (state.bps > 0) {
    const earned = state.bps * dt;
    state.bananas += earned;
    state.totalBananas += earned;
    renderStats();
    renderUpgrades();
  }

  requestAnimationFrame(gameTick);
}

// ===================== SAVE / LOAD =====================
const SAVE_KEY = 'bananaClickerSave';

function saveGame() {
  localStorage.setItem(SAVE_KEY, JSON.stringify(state));
  const msg = document.getElementById('saveMsg');
  msg.textContent = 'Game saved!';
  setTimeout(() => msg.textContent = '', 2000);
}

function loadGame() {
  const raw = localStorage.getItem(SAVE_KEY);
  if (raw) {
    try {
      const saved = JSON.parse(raw);
      state = { ...defaultState(), ...saved };
      recalcStats();
    } catch(e) { console.warn('Bad save data'); }
  }
}

function resetGame() {
  if (!confirm('Reset all progress? This cannot be undone!')) return;
  localStorage.removeItem(SAVE_KEY);
  state = defaultState();
  recalcStats();
  renderStats();
  renderUpgrades();
  const msg = document.getElementById('saveMsg');
  msg.textContent = 'Progress reset.';
  setTimeout(() => msg.textContent = '', 2000);
}

// Auto-save every 30 seconds
setInterval(saveGame, 30000);

// ===================== INIT =====================
document.getElementById('bananaBtn').addEventListener('click', clickBanana);
document.getElementById('saveBtn').addEventListener('click', saveGame);
document.getElementById('resetBtn').addEventListener('click', resetGame);

loadGame();
recalcStats();
renderStats();
renderUpgrades();
requestAnimationFrame(gameTick);
</script>
</body>
</html>